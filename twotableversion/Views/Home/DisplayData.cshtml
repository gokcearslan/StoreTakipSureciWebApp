@using twotableversion.Data

@{
    ViewData["Title"] = "Display Data";

  
}



<h1 style="color:#FCB000;">@*Selected Takvim: @ViewBag.SelectedTakvimId*@</h1>
<h1 style="color: #FCB000;">@*Selected Uygulama:*@ @ViewBag.SelectedUygulamaAdi , @ViewBag.SelectedTakvimId </h1>



<input type="text" id="searchInput" placeholder="Search...">
<button onclick="searchInTable()" style="background-color: #FFCA4F; color: white;">Search</button>

<a href="/Home/Save" style="color:#e68a06;  margin-top:10px; margin-left:50px;">Yeni satır ekle</a>











<table class="table">
    <thead>
        <tr>
           @* <th>Uygulama Adı</th>
            <th>Takvim Id</th>*@
            <th>Etki Alanı</th>
            <th>Talep/Bug</th>
            <th>Talep Adı</th>
            <th>Bulgu Durumu</th>
            <th>Segment</th>
            <th>KKTYE Gönderildi mi?</th>
            <th>KKTE Onayı Alındı mı?</th>
            <th>Notlar</th>
            <th>İlgili Analist</th>
            <th>Merge Durumu IOS</th>
            <th>Merge Durumu AND</th>
            <th>Merge Durumu BE</th>
            <th>İlgili IOS Developer</th>
            <th>İlgili Android Developer</th>
            <th>İlgili BE Developer</th>
            <th>BE Taşıma Katmanları</th>
            <th>Geçiş Zorunluluğu </th>
            <th>UI/API Senaryo ID</th>
            <th>İşlem</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
               @* <td>@item.UygulamaAdı</td>
                <td>@item.TakvimId</td>*@
                <td>@item.EtkiAlanı</td>
                <td>@item.TalepBug</td>
                <td>@item.TalepAdı</td>
                <td>@item.BulguDurumu</td>
                <td>@item.Segment</td>
                <td>@item.KktyeGönderİldİMİ</td>
                <td>@item.KktOnayiAlindiMi</td>
                <td>@item.Notlar</td>
                <td>@item.İlgiliAnalist</td>
                <td>@item.MergeDurumuIos</td>
                <td>@item.MergeDurumuAnd</td>
                <td>@item.MergeDurumuBe</td>
                <td>@item.İlgiliIosDeveloper</td>
                <td>@item.İlgiliAndroidDeveloper</td>
                <td>@item.İlgiliBeDeveloper</td>
                <td>@item.BeTaşımaKatmanları</td>
                <td>@item.GeçİşZorunluluğu</td>
                <td>@item.UiApiSenaryoId</td>
                <td>
                    <a href="/Home/Edit/@item.satırID" style="color:#e68a06">Edit</a>&nbsp;|&nbsp;
                
                    <a href="#" style="color:#e68a06" onclick="showModal(); document.getElementById('confirmDelete').href='/Home/Delete/@item.satırID'">Delete</a>
                

                    @*<a href="/Home/Delete/@item.satırID" style="color:#e68a06">Delete</a>*@
                </td>
            </tr>
        }
    </tbody>
</table>

@*<button class="btn btn-primary" onclick="addShortcut()">Add Shortcut</button>*@


<script>
    function searchInTable() {
        var searchText = document.getElementById("searchInput").value.toLowerCase();
        var rows = document.getElementsByTagName("tr");

        for (var i = 1; i < rows.length; i++) { // Start from 1 to skip the table header row
            var row = rows[i];
            var cells = row.getElementsByTagName("td");
            var found = false;

            for (var j = 0; j < cells.length; j++) {
                var cell = cells[j];
                if (cell.innerHTML.toLowerCase().includes(searchText)) {
                    found = true;
                    break;
                }
            }

            if (found) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        }
    }

    
</script>
<form method="post" asp-action="ExportToExcel">
    <input type="hidden" name="selectedTakvimId" value="@ViewBag.SelectedTakvimId" />
    <input type="hidden" name="selectedUygulamaAdi" value="@ViewBag.SelectedUygulamaAdi" />
    <button type="submit" class="btn btn-primary" style="background-color: #FFCA4F; color: white;">Export to Excel</button>
</form>

<!-- The Modal -->
<div id="deleteModal" class="modal">
    <div class="modal-content center">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2 style="color:red">Are you sure</h2>
        <p> you want to delete this item?</p>
        <div class="button-container" >
            <a href="#" class="delete-button" style=" color:#e68a06"" id="confirmDelete">Yes</a>
            <a href="#" class="cancel-button" style="color:#e68a06" onclick="closeModal()">No</a>
        </div>
    </div>
</div>

<script>
    // Show the modal
    function showModal() {
        var modal = document.getElementById("deleteModal");
        modal.style.display = "block";
    }

    // Close the modal
    function closeModal() {
        var modal = document.getElementById("deleteModal");
        modal.style.display = "none";
    }
</script>
<style>
    /* Center the modal */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0, 0, 0, 0.4); /* Black with a transparency */
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        margin: 15% auto; /* 15% from the top and centered */
        padding: 20px;
        border: 1px solid #888;
        width: 80%; /* Could be more or less, depending on screen size */
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        transition: 0.3s;
    }

    /* Close button */
    .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }

    /* Center the content inside the modal */
    .center {
        text-align: center;
    }

    /* Additional styles for buttons and other elements can be added as needed */
</style>




@*<script>
    function addShortcut(takvimId, uygulamaAdi) {
        var shortcutName = prompt("Enter a name for the shortcut:");
        if (shortcutName) {
            // Send the TakvimId, UygulamaAdi, and ShortcutName to the server to save
            $.ajax({
                url: '/Shortcuts/Add', // Replace with your controller action
                method: 'POST',
                data: {
                    TakvimId: takvimId,
                    UygulamaAdi: uygulamaAdi,
                    ShortcutName: shortcutName
                },
                success: function (data) {
                    if (data.success) {
                        // Refresh the shortcuts list or update it as needed
                        // You can also display a success message to the user
                    } else {
                        alert("Failed to save shortcut.");
                    }
                }
            });
        }
    }
</script>*@
